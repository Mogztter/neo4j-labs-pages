import org.asciidoctor.gradle.jvm.AsciidoctorTask

plugins {
    id 'org.asciidoctor.jvm.gems' version '3.1.0' apply false
    id 'org.asciidoctor.jvm.convert' version '3.1.0' apply false
}

apply plugin: 'org.asciidoctor.jvm.gems'

repositories {
    mavenCentral()
    jcenter()
    ruby {
        gems()
    }
}

def stage = project.findProperty('stage')

group = 'com.neo4j'
version = '1.0.0'
archivesBaseName = 'neo4j-labs-pages'

description = """neo4j-labs-pages"""

asciidoctorj {
    options 'standalone': false
    attributes 'apoc-version': "3.5.0.4",
            'icons': 'font',
            'stage': stage != null ? stage : ''
}

task convertHtml(type: AsciidoctorTask) {
    dependsOn asciidoctorGemsPrepare

    baseDir file("${projectDir}/asciidoc")
    sourceDir file("${projectDir}/asciidoc")
    outputDir file("${projectDir}/build")
}

task convert {
    dependsOn convertHtml
}
